#!/bin/bash
source lib/source.txt
source lib/func.txt
source lib/rpi_func.txt
source userdata.txt

mkdir -p ${TMP0}
cd ${TMP0}

### Download kernel
DOWNLOAD

### Extract
EXTRACT

### Setup
case `grep -Fx "edge=1" "../userdata.txt" >/dev/null; echo $?` in
  0)
    EDGEV6_SETUP
    ;;
  1)
    ARMV6_SETUP
    ;;
  *)
    #
    ;;
esac

### Patching
case `grep -Fx "crosscompile=1" "../../userdata.txt" >/dev/null; echo $?` in
  0)
    CCPATCH
    ;;
  1)
    NCPATCH
    ;;
  *)
    #
    ;;
esac

### Defconfig
case `grep -Fx "custom_defconfig=1" "../../userdata.txt" >/dev/null; echo $?` in
  0)
    ARMV6_CCONFIG
    ;;
  1)
    RPI_FCONFIG
    ;;
  *)
    #
    ;;
esac

### Menuconfig
case `grep -Fx "menuconfig=1" "../../userdata.txt" >/dev/null; echo $?` in
  0)
    ARMV6_MENUCONFIG
    ;;
  *)
    #
    ;;
esac

### Build deb
case `grep -Fx "crosscompile=1" "../../userdata.txt" >/dev/null; echo $?` in
  0)
    ARMV6_CCOMPILE
    ;;
  1)
    ARMV6_NCOMPILE
    ;;
  *)
    #
    ;;
esac
echo Done.
echo
